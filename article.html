<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="icon" href="multimedia/icon.jpg"/>
		<style>
			/* stylisation d'ensemble */
			body, html {
				height: 100%;
				margin: 0;
			}
			a {
				color: rgb(0, 0, 0);
				text-decoration: none;
			}
			a:hover {
				cursor: pointer;
				border-bottom: 1px solid;
			}
			/* stylisation de l'article */
			article {
				width: 60%;
				margin: 50px auto;
				text-align: center;
				color: rgb(0, 0, 0);
			}
			@media screen and (max-width: 450px) {
				article {
					width: 95%;
					font-size: 22px;
				}
			}
			article h1 {
				font-weight: 500;
				font-size: 20px;
				font-family: "Georgia";
				color: rgb(0, 0, 0);
			}
			article h2 {
				text-transform: uppercase;
				font-weight: 100;
				font-size: 16px;
				font-family: "Georgia";
				color: rgb(169, 169, 169);			
			}
			article p {
				font-weight: 100;
				font-size: 16px;
				font-family: "Georgia";
				color: rgb(0, 0, 0);
				text-align: left;
			}
			article q {
				border-left: 3px solid rgb(169, 169, 169);
				font-weight: 100;
				font-size: 16px;
				font-family: "Georgia";
				color: rgb(169, 169, 169);			
				text-align: left;
			}
			article img {
				width: 80%;
			}
			article ul {
				list-style: none;
				padding-left: 0;
				text-align: left;
			}
			article li {
				display: inline;
			}
			/* stylisation de la navigation */
			nav {
				width: 50%;
				margin: auto;
				padding: 50px;
				text-align: center;
			}
			nav button {
				padding: 0;
				border: none;
				text-transform: uppercase;
				font-weight: 100;
				font-size: 16px;
				font-family: "Georgia";
				color: rgb(0, 0, 0);				
				background-color: rgb(0, 0, 0);
			}
			nav button:hover {
				cursor: pointer;
				border-bottom: 1px solid;
			}
			nav button:focus {
				outline-color: none;
			}
		</style>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
		<script type="text/javascript">
			function page() {
				// on prépare l'identification
				var url, code, word;
				url = window.location.href;
				code = url.substr(url.length - 8);
				word = url.substr(url.length - 11);
				// on envoie la requête XML
				var xhr = new XMLHttpRequest();
				xhr.onload = function() {
					if (xhr.status === 200) {
						var xmlDoc = xhr.responseXML;
						var data = xmlDoc.getElementsByTagName("article");
						var text = xmlDoc.getElementsByTagName("paragraph");
						var citation = xmlDoc.getElementsByTagName("quote");
						var multimedia = xmlDoc.getElementsByTagName("image");
						var article = document.getElementById("article");
						article.innerHTML = "";
						// on calcul le nombre de données
						for (var i = 0; i < data.length; i++) {
							// on fait une condition pour identifier les données
							if (code == data[i].getAttribute("no")) {
								// on récupère les données dans les attributs et les éléments XML
								var title, date, media, graph, metadata, localisation, length, elevation, climax, viewpoint, duration, paragraph, quote, button;
								title = document.createElement("h1");
								title.appendChild(document.createTextNode(getNodeValue(data[i], "title")));
								article.appendChild(title);
								date = document.createElement("h2");
								date.appendChild(document.createTextNode(getNodeValue(data[i], "date")));
								article.appendChild(date);
								media = document.createElement("img");
								media.setAttribute("src", "multimedia/"+code+"/media.jpg");
								article.appendChild(media);
								graph = document.createElement("img");
								graph.setAttribute("src", "multimedia/"+code+"/graph.jpg");
								article.appendChild(graph);
								metadata = document.createElement("ul");
								article.appendChild(metadata);
								localisation = document.createElement("li");
								localisation.innerHTML = "#";
								localisation.appendChild(document.createTextNode(getNodeValue(data[i], "localisation")));
								metadata.appendChild(localisation);
								length = document.createElement("li");
								length.innerHTML = ", #";
								length.appendChild(document.createTextNode(getNodeValue(data[i], "length")));
								metadata.appendChild(length);
								elevation = document.createElement("li");
								elevation.innerHTML = ", #";
								elevation.appendChild(document.createTextNode(getNodeValue(data[i], "elevation")));
								metadata.appendChild(elevation);
								climax = document.createElement("li");
								climax.innerHTML = ", #";
								climax.appendChild(document.createTextNode(getNodeValue(data[i], "climax")));
								metadata.appendChild(climax);
								viewpoint = document.createElement("li");
								viewpoint.innerHTML = ", #";
								viewpoint.appendChild(document.createTextNode(getNodeValue(data[i], "viewpoint")));
								metadata.appendChild(viewpoint);
								duration = document.createElement("li");
								duration.innerHTML = ", #";
								duration.appendChild(document.createTextNode(getNodeValue(data[i], "duration")));
								metadata.appendChild(duration);
								var x = "", j;
								for (var j = 0; j < text.length; j++) {
  									x += "<p>"+text[j].textContent+"</p>";
								}
								paragraph = document.createElement("div");
								paragraph.innerHTML = x;
								article.appendChild(paragraph);
								
								var y = "", k;
								for (k = 0; k < citation.length; k++) {
  									y += "<q>"+citation[k].textContent+"</q>";
								}
								quote = document.createElement("div");
								quote.innerHTML = y;
								article.appendChild(quote);
								/*var y = "", k;
								for (k = 0; k < multimedia.length; k++) {
  									y += "<img class='images' src='multimedia/"+code+"/image-"+multimedia[k].getAttribute("status")+".jpg'/>";
								}
								image = document.createElement("div");
								image.innerHTML = y;
								article.appendChild(image);*/
								var test = document.createElement("a");
								test.setAttribute("id", "left");
								test.setAttribute("onclick", "plusSlides(-1)");
								test.innerHTML = "&#10094;";
								image.appendChild(test);
								button = document.createElement("button");
								button.setAttribute("onclick", "slide(1)");
								button.setAttribute("class", "button");
								button.innerHTML = "&#10227;";
								article.appendChild(button);
							}
						}
						function getNodeValue(obj, tag) {
							return obj.getElementsByTagName(tag)[0].firstChild.nodeValue;
						}
					}
				};
				// on charge le contenu du document
				xhr.open("GET", "document/articles.xml", true);
				xhr.send(null);
			}
		</script>
	</head>
	<body onload="page()">
		<article id="article"><!-- Document Object Model Contents --></article>
		<nav><button onclick="location.href='https://ofstoriesandtrees.github.io/index/main.html'">home</button></nav>	
	</body>
</html>
