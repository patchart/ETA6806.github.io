<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="icon" href="multimedia/icon.jpg"/>
		<style>
			/* stylisation d'ensemble */
			html, body {
				height: 100%;
				margin: 0;
  				font-family: "Arial";
			}
			button, a {
				-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
			}
			/* stylisation de l'entête */
			header {
				height: 100%; 
				background-image: url("multimedia/thematic.jpg");
				background-position: center;
				background-repeat: no-repeat;
				background-size: cover;
			}
			header div {
				height: 100%;
				background-color: rgba(0, 0, 0, 0.5);
			}
			header h1 {
				position: absolute;
				left: 0;
				bottom: 35%;
				width: 100%;
				letter-spacing: 5px;
				text-align: center;
				font-size: 100px;
				font-weight: 500;
				color: rgb(255, 255, 255);
			}
			@media screen and (max-width: 450px) {
				header h1 {
					bottom: 50%;
					font-size: 60px;
				}
			}
			header h2 {
				position: absolute;
				left: 0;
				bottom: 33%;
				width: 100%;
				letter-spacing: 1px;
				text-align: center;
				font-size: 20px;
				font-weight: 100;
				color: rgb(255, 255, 255);
			}
			@media screen and (max-width: 450px) {
				header h2 {
					bottom: 38%;
				}
			}
			header ul {
				position: absolute;
				left: 0;
				bottom: 20%;
				width: 100%;
				margin: 0;
				padding: 0;
				text-align: center;
				list-style: none;
			}
			@media screen and (max-width: 450px) {
				header ul {
					bottom: 25%;
				}
			}
			header li {
				display: inline;
				list-style-type: none;
				font-size: 16px;
				font-weight: 100;
  				text-transform: uppercase;
				color: rgb(255, 255, 255);
				padding: 12px 20px;
				border: 2px solid rgb(255, 255, 255);
			}
			header li:last-child {
				margin: 0 0 0 15px; /* 80 */
			}
			header li:hover, header a:hover {
				cursor: pointer;
				background-color: rgb(255, 255, 255);
				color: rgba(0, 0, 0, 0.8);
			}
			/* stylisation du contenu principal */
			main {
				padding-top: 50px;
				width: 50%;
				margin: auto;
				font-family: "serif";
			}
			@media screen and (max-width: 450px) {
				main {
					width: 100%;
				}
			}
			section {
				display: block;
				margin: 50px auto;
				text-align: center;
			}
			section img {
				width: 80%;
			}
			@media screen and (max-width: 450px) {
				section img {
					width: 275px;
				}
			}
			section button {
				border: none;
				padding: 0;
				margin-bottom: -15px;
				background-color: transparent;
			}
			section button:hover {
				cursor: pointer;
			}
			section h3 {
				font-family: "serif";
				font-weight: bold;
				font-size: 20px;
				color: rgb(52, 52, 52);
 				/*text-decoration: underline;*/
			}
			/*section h3:hover {
 				text-decoration: none;
			}*/
			section h4 {
				text-transform: uppercase;
				font-weight: 100;
				font-size: 15px;
				color: rgb(169, 169, 169);
			}
			section p {
				line-height: 30px;
				word-spacing: 4px;
				text-align: left;
				font-weight: 100;
				font-size: 16px;
				color: rgb(56, 56, 56);
			}
			section p:after {
				content: "...";
			}
			@media screen and (max-width: 450px) {
				section p {
					margin-left: 10px;
					margin-right: 10px;
				}
			}
			/* stylisation du pied de page */
			footer {
				padding: 15px 35px;
				text-align: center;
			}
			footer h5 {
				font-weight: 100;
				font-size: 16px;
				font-family: "serif";
			}
			footer a {
				color: rgb(0, 0, 0);
				text-decoration: none;
			}
			footer a:hover {
				color: rgb(169, 169, 169);
			}
		</style>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
		<script type="text/javascript">
			function page() {
				// on envoie la requête XML
				var xhr = new XMLHttpRequest();
				xhr.onload = function() {
					if (xhr.status === 200) {
						var xmlDoc = xhr.responseXML;
						var text = xmlDoc.getElementsByTagName("indent");
						var data = xmlDoc.getElementsByTagName("article");
						var main = document.getElementById("main");
						main.innerHTML = "";
						// on calcul le nombre de données
						for (var i = 0; i < data.length; i++) {
							var section, media, x, y, title, date, indentation, z;
							section = document.createElement("section");
							main.appendChild(section);
							media = document.createElement("img");
							media.setAttribute("src", "multimedia/"+data[i].getAttribute("no")+"/media.jpg");
							section.appendChild(media);
							x = document.createElement("form");
							x.setAttribute("action", "article.html");
							section.appendChild(x);
							y = document.createElement("button");
							y.setAttribute("name", "no");
							y.setAttribute("value", data[i].getAttribute("no"));
							x.appendChild(y);
							title = document.createElement("h3");
							title.appendChild(document.createTextNode(getNodeValue(data[i], "title")));
							y.appendChild(title);
							date = document.createElement("h4");
							date.appendChild(document.createTextNode(getNodeValue(data[i], "date")));
							section.appendChild(date);
							/*preambule = document.createElement("p");
							preambule.appendChild(document.createTextNode(getNodeValue(data[i], "paragraph")));
							section.appendChild(preambule);*/
							var x = "", j;
							for (var j = 0; j < text.length; j++) {
  								/*x += "<p>"+text[j].textContent+"</p>";*/
								x += "<"+text[j].getAttribute("semantic")+">"+text[j].textContent+"</"+text[j].getAttribute("semantic")+">";
							}
							indentation = document.createElement("div");
							indentation.innerHTML = x;
							article.appendChild(indentation);
							z = document.createElement("hr");
							section.appendChild(z);
						}
						function getNodeValue(obj, tag) {
							return obj.getElementsByTagName(tag)[0].firstChild.nodeValue;
						}
					}
				};
				// on charge le contenu du document
				xhr.open("GET", "document/articles.xml", true);
				xhr.send(null);
			}
		</script>
	</head>
	<body onload="page()">
		<header><div><h1>Of Stories<br/>and Trees</h1><h2>A search of wisdom and discernment</h2><ul><li onclick="window.location.href='#main';">blog</li><li onclick="window.location.href='https://www.alltrails.com/members/patrick-chartrand-4/maps';">custom maps</li></ul></div></header>
		<main id="main"><!-- Document Object Model Contents --></main>
		<footer><h5><a href="mailto:patrick.chartrand@umontreal.ca">Patrick Chartrand</a> &copy; 2021</h5></footer>
	</body>
</html>
